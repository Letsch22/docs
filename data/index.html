<!doctype html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width">

  <title>Exosite API Documentation</title>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

  <!-- Favicon -->
  <link rel="icon" href="/assets/favicon.png">

  <!-- Style -->
  <link  href='/assets/theme-white/style.css' rel='stylesheet'>
  <link href='/assets/style.css' rel='stylesheet'>

  <!-- Meta -->
  <meta content="Exosite APIs" property="og:title">
  <meta content="Documentation for Exosite's APIs" name="description">

  <!-- Status Page API Lib -->
  <script type="text/javascript" src="https://statuspage-production.s3.amazonaws.com/se.js"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-44116002-2', 'auto');
    ga('send', 'pageview');

  </script>

  <!-- Initializer -->
  <script></script>
</head>
<body role='flatdoc' class="no-literate">
  <div class='header'>
    <div class='left'>
      <a href="/">
        <img src="/assets/logo-2x.png" id="logo">
      </a>
    </div>
    <div class='links right'>
      <ul>
        <li><input id="docsearch" placeholder="Search..."></li>
        <li><a href='http://status.exosite.com' id="status-text"><div id="status-icon"></div>Status</a></li>
        <li><a href='https://support.exosite.com'>Support</a></li>
        <li><a href='https://github.com/exosite/api'>Contribute</a></li>
      </ul>
    </div>
  </div>

  <div class='content-root'>
    <div class='menubar'>
      <ul class='topmenu'>
        <li><a class="level-0" href="/">Overview</a></li>
        <ul style="padding-bottom:0.5em;"><p style="font-size:larger;">Tutorials</p>
          <li><a class="level-0" href="/tutorials/get-started">Getting Started</a></li>
        </ul>
        <ul style="padding-bottom:0.5em;"><p style="font-size:larger;">Device APIs</p>
          <li><a class="level-0" href="/coap">CoAP</a></li>
          <li><a class="level-0" href="/data">HTTP Data</a></li>
          <li><a class="level-0" href="/provision/device">Device Provisioning</a></li>
          <li><a class="level-0" href="/udp">UDP Single Shot</a></li>
        </ul>
        <ul style="padding-bottom:0.5em;"><p style="font-size:larger;">Application APIs</p>
          <li><a class="level-0" href="/rpc">Remote Procedure Call - RPC</a></li>
          <li><a class="level-0" href="/provision/management">Fleet Management</a></li>
          <li><a class="level-0" href="/scripting">One Platform Scripting</a></li>
          <li><a class="level-0" href="/widget">Portals Custom Widget</a></li>
          <li><a class="level-0" href="/portals">Portals API</a></li>
        </ul>
        <ul style="padding-bottom:0.5em;"><p style="font-size:larger;">Reference</p>
          <li><a class="level-0" href="https://support.exosite.com/hc/en-us/sections/200072527">One Platform</a></li>
          <li><a class="level-0" href="https://support.exosite.com/hc/en-us/sections/200072708">Portals Web Application</a></li>
          <li><a class="level-0" href="https://support.exosite.com/hc/en-us/sections/200054894">Portals Subdomain Admin</a></li>
        </ul>
        <ul style="padding-bottom:0.5em;"><p style="font-size:larger;">Other</p>
          <li><a class="level-0" href="/commander">Chat Interface - Commander</a></li>
          <li><a class="level-0" href="https://github.com/exosite/exoline/blob/master/README.md">Command Line Interface - Exoline</a></li>
          <li><a class="level-0" href="https://github.com/exosite-labs">Libraries</a></li>
        </ul>
      </ul>
      <div class='menu section' role='flatdoc-menu'></div>
    </div>
    <div role='flatdoc-content' class='content'><h1 id="http-data-api">HTTP Data API</h1>
<p>This is a lightweight HTTP-based API for writing to and reading from the Exosite One Platform. It is intended for bandwidth-constrained applications. It provides the ability to write new data points or read the latest data point.</p>
<p>If you&#39;re completely new to Exosite&#39;s APIs, you may want to read the <a href="../README.md">API overview</a> first.</p>
<h4 id="procedures">Procedures</h4>
<p><a href="#write">Write</a> - write new data to a set of dataports</p>
<p><a href="#read">Read</a> - read the latest data from a set of dataports</p>
<p><a href="#hybrid-writeread">Hybrid write/read</a> - write a set of dataports, then read a set of dataports</p>
<p><a href="#ip">IP</a> - get the IP address of the host server</p>
<h2 id="libraries-and-sample-code">Libraries and Sample Code</h2>
<p>Sample code is available that uses this API.</p>
<ul>
<li><a href="https://github.com/exosite-garage/python_helloworld">Python hello world</a></li>
<li><a href="https://github.com/exosite-garage/arduino_http_post">Arduino POST</a></li>
<li><a href="https://github.com/exosite-garage/fluid_simple_cloud">Arduino-compatible devices (Using Arduino Library)</a> - for, e.g., 8-bit micros running C/C++ code</li>
<li><a href="https://github.com/exosite-garage/utility_scripts/blob/master/http_https_data_interface_read_write_socket_example.py">Python read and write example with socket</a>, <a href="https://github.com/exosite-garage/utility_scripts/blob/master/http_https_data_interface_get_ip_socket_example.py">Python - Get IP Address Example</a> - socket level code intended as a reference for implementation in other languages</li>
<li><a href="https://github.com/exosite-garage/utility_scripts/blob/master/http_https_data_interface_read_write_example.py">Python read and write example with httplib</a></li>
</ul>
<h2 id="notational-conventions">Notational Conventions</h2>
<p>This document uses a few notational conventions:</p>
<ul>
<li>JSON is pretty printed for clarity. The extra whitespace is not included in the RPC JSON.</li>
<li>Comments (<code>//</code>) are occasionally included in JSON to give hints or provide detail. These comments are not included in actual requests or responses.</li>
<li>A name in angle brackets, e.g. <code>&lt;myvar&gt;</code>, is a placeholder that will be defined elsewhere.</li>
<li><code>number</code> indicates a number, e.g. 42</li>
<li><code>string</code> represents a string, e.g. &quot;MySensor&quot;</li>
<li><code>|</code> represents multiple choice</li>
<li><code>=</code> represents default value</li>
<li><code>...</code> represents one or more of the previous item</li>
</ul>
<h2 id="http-responses">HTTP Responses</h2>
<p>Typical HTTP response codes include:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th style="text-align:left">Response</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td style="text-align:left">OK</td>
<td style="text-align:left">Successful request, returning requested values</td>
</tr>
<tr>
<td>204</td>
<td style="text-align:left">No Content</td>
<td style="text-align:left">Successful request, nothing will be returned</td>
</tr>
<tr>
<td>4xx</td>
<td style="text-align:left">Client Error</td>
<td style="text-align:left">There was an error* with the request by the client</td>
</tr>
<tr>
<td>401</td>
<td style="text-align:left">Unauthorized</td>
<td style="text-align:left">No or invalid CIK</td>
</tr>
<tr>
<td>5xx</td>
<td style="text-align:left">Server Error</td>
<td style="text-align:left">There way an error with the request on the server</td>
</tr>
</tbody>
</table>
<p><em>* Note: aliases that are not found are not considered errors in the request. See the documentation for <a href="#read">read</a>, and <a href="#write">write</a> and <a href="#hybrid-writeread">Hybrid write/read</a> for details.</em></p>
<h1 id="procedures">Procedures</h1>
<h2 id="write">Write</h2>
<p>Write one or more dataports of alias <code>&lt;alias&gt;</code> with given <code>&lt;value&gt;</code>. The client (e.g. device, portal) is identified by <code>&lt;CIK&gt;</code>. Data is written with the server timestamp as of the time the data was received by the server. Data cannot be written faster than a rate of once per second, doing so results in undefined behavior. If multiple aliases are specified, they are written at the same timestamp.</p>
<h5 id="request">request</h5>
<pre><code>POST /onep:v1/stack/alias HTTP/1.1 
Host: m2.exosite.com 
X-Exosite-CIK: &lt;CIK&gt; 
Content-Type: application/x-www-form-urlencoded; charset=utf-8 
Content-Length: &lt;length&gt; 
&lt;blank line&gt;
&lt;alias 1&gt;=&lt;value 1&gt;&amp;&lt;alias 2...&gt;=&lt;value 2...&gt;&amp;&lt;alias n&gt;=&lt;value n&gt;
</code></pre><h5 id="response">response</h5>
<pre><code>HTTP/1.1 204 No Content 
Date: &lt;date&gt; 
Server: &lt;server&gt; 
Connection: Close 
Content-Length: 0 
&lt;blank line&gt;
</code></pre><ul>
<li>See <a href="#http-responses">HTTP Responses</a> for a full list of responses.</li>
</ul>
<h5 id="example">example</h5>
<pre><code>$ curl http://m2.exosite.com/onep:v1/stack/alias \
    -H &#39;X-Exosite-CIK: &lt;CIK&gt;&#39; \
    -H &#39;Accept: application/x-www-form-urlencoded; charset=utf-8&#39; \
    -d &#39;&lt;alias&gt;=&lt;value&gt;&#39;
</code></pre><h2 id="read">Read</h2>
<p>Read the most recent value from one or more dataports with alias <code>&lt;alias&gt;</code>. The client (e.g. device or portal) to read from is identified by <code>&lt;CIK&gt;</code>. If at least one <code>&lt;alias&gt;</code> is found and has data, data will be returned.</p>
<h5 id="request">request</h5>
<pre><code>GET /onep:v1/stack/alias?&lt;alias 1&gt;&amp;&lt;alias 2...&gt;&amp;&lt;alias n&gt; HTTP/1.1 
Host: m2.exosite.com 
X-Exosite-CIK: &lt;CIK&gt; 
Accept: application/x-www-form-urlencoded; charset=utf-8 
&lt;blank line&gt;
</code></pre><h5 id="response">response</h5>
<pre><code>HTTP/1.1 200 OK 
Date: &lt;date&gt; 
Server: &lt;server&gt; 
Connection: Close
Content-Length: &lt;length&gt; 
&lt;blank line&gt;
&lt;alias 1&gt;=&lt;value 1&gt;&amp;&lt;alias 2...&gt;=&lt;value 2...&gt;&amp;&lt;alias n&gt;=&lt;value n&gt;
</code></pre><ul>
<li>Response may also be <code>HTTP/1.1 204 No Content</code> if either none of the aliases are found or they are all empty of data</li>
<li>See <a href="#http-responses">HTTP Responses</a> for a full list of responses</li>
</ul>
<h5 id="example">example</h5>
<pre><code>$ curl http://m2.exosite.com/onep:v1/stack/alias?&lt;dataport-alias&gt; \
    -H &#39;X-Exosite-CIK: &lt;CIK&gt;&#39; \
    -H &#39;Accept: application/x-www-form-urlencoded; charset=utf-8&#39;
</code></pre><h2 id="hybrid-write-read">Hybrid write/read</h2>
<p>Write one or more dataports of alias <code>&lt;alias w&gt;</code> with given <code>&lt;value&gt;</code> and then read the most recent value from one or more dataports with alias <code>&lt;alias r&gt;</code>. The client (e.g. device, portal) to write to and read from is identified by <code>&lt;CIK&gt;</code>. All writes occur before all reads.</p>
<h5 id="request">request</h5>
<pre><code>POST /onep:v1/stack/alias?&lt;alias r1&gt;&amp;&lt;alias r2...&gt;&amp;&lt;alias rn&gt; HTTP/1.1 
Host: m2.exosite.com 
X-Exosite-CIK: &lt;CIK&gt; 
Accept: application/x-www-form-urlencoded; charset=utf-8 
Content-Type: application/x-www-form-urlencoded; charset=utf-8
Content-Length: &lt;length&gt; 
&lt;blank line&gt;
&lt;alias w1&gt;=&lt;value 1&gt;&amp;&lt;alias w2...&gt;=&lt;value 2...&gt;&amp;&lt;alias wn&gt;=&lt;value n&gt;
</code></pre><h5 id="response">response</h5>
<pre><code>HTTP/1.1 200 OK
Date: &lt;date&gt; 
Server: &lt;server&gt; 
Connection: Close 
Content-Length: &lt;length&gt; 
&lt;blank line&gt;
&lt;alias r1&gt;=&lt;value 1&gt;&amp;&lt;alias r2...&gt;=&lt;value 2...&gt;&amp;&lt;alias rn&gt;=&lt;value n&gt;
</code></pre><ul>
<li>Response may also be <code>HTTP/1.1 204 No Content</code> if either none of the aliases are found or they are all empty of data</li>
<li>See <a href="#http-responses">HTTP Responses</a> for a full list of responses.</li>
</ul>
<h5 id="example">example</h5>
<pre><code>$ curl http://m2.exosite.com/onep:v1/stack/alias?&lt;alias_to_read&gt; \
    -H &#39;X-Exosite-CIK: &lt;CIK&gt;&#39; \
    -H &#39;Accept: application/x-www-form-urlencoded; charset=utf-8&#39; \
    -d &#39;&lt;alias_to_write&gt;=&lt;value&gt;&#39;
</code></pre><h1 id="long-polling">Long Polling</h1>
<p>The <a href="#read">read</a> procedure now supports long polling. Long polling is a method of getting a server push without the complexities of setting up publicly accessible HTTP server endpoints on your device. As the name suggests, long polling is similar to normal polling of an HTTP resource, but instead of requiring the client to make a new request to the server constantly, the server will wait to return until it has new information to return to the client (or a timeout has been reached).</p>
<p>To perform a request with long polling simply add the header <code>Request-Timeout: &lt;miliseconds&gt;</code> to your request. The server will then wait until a new datapoint is written to the given dataport and will then immediately return the value. If no datapoint is written before that time a <code>304 Not Modified</code> is returned and the client may make another long poling request to continue monitoring that dataport.</p>
<p>You may also optionally add an <code>If-Modified-Since</code> header to specify a start time to wait. This is exactly the same as the <code>alias.last</code> semantics in scripting. You will want to use this if it&#39;s important that you receive all updates to a given dataport, otherwise it is possible to miss points that get written between long polling requests.</p>
<p>Note: Only one dataport may be read at a time when using long polling.</p>
<h5 id="request">request</h5>
<pre><code>GET /onep:v1/stack/alias?&lt;alias 1&gt; HTTP/1.1 
Host: m2.exosite.com 
X-Exosite-CIK: &lt;CIK&gt; 
Accept: application/x-www-form-urlencoded; charset=utf-8 
Request-Timeout: &lt;timeout&gt;
If-Modified-Since: &lt;timestamp&gt;
&lt;blank line&gt;
</code></pre><ul>
<li><code>&lt;alias&gt;</code> is the alias you monitor for new datapoints.</li>
<li><code>Request-Timeout</code> specifies the how long to wait on changes.  <code>&lt;timeout&gt;</code> is a millisecond value and cannot be more than 300 seconds (300000 ms).</li>
<li><code>If-Modified-Since</code> specifies waiting on aliases since the <code>&lt;timestamp&gt;</code>.  <code>&lt;timestamp&gt;</code> can be timestamp seconds since 1970-01-01 00:00:00 UTC or standard <a href=http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html>HTTP-Date</a> format. If this is not specified it defaults to &quot;now&quot;.</li>
</ul>
<h5 id="response">response</h5>
<p>When the dataport is updated:</p>
<pre><code>HTTP/1.1 200 OK 
Date: &lt;date&gt; 
Server: &lt;server&gt; 
Connection: Close
Content-Length: &lt;length&gt;
Last-Modified: &lt;datapoint-modification-date&gt;
&lt;blank line&gt;
&lt;alias&gt;=&lt;value&gt;
</code></pre><p>If the dataport is not updated before timeout:</p>
<pre><code>HTTP/1.1 304 Not Modified
Date: &lt;date&gt; 
Server: &lt;server&gt; 
Connection: Close
Content-Length: &lt;length&gt; 
&lt;blank line&gt;
</code></pre><p>When the dataport is updated and a value is returned, a <code>Last-Modified</code> header is included. When it is vital for your application to receive all updates to a dataport, you can pass the <code>Last-Modified</code> header value back to the <code>If-Not-Modified-Since</code> header in your next request to make sure that you don&#39;t miss any points that may have been written since the last request returned.</p>
<h5 id="example">example</h5>
<pre><code>$ curl http://m2.exosite.com/onep:v1/stack/alias?&lt;dataport-alias&gt; \
    -H &#39;X-Exosite-CIK: &lt;CIK&gt;&#39; \
    -H &#39;Accept: application/x-www-form-urlencoded; charset=utf-8&#39; 
    -H &#39;Request-Timeout: 30000 
    -H &#39;If-Modified-Since: 1408088308
</code></pre></div>
  </div>

  <div id="markdown" style="display:none;">

  <div>

  <!-- Custom -->
  <script src='/assets/main.js'></script>

</body>
</html>
