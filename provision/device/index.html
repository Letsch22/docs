<!doctype html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width">

  <title>Exosite API Documentation</title>

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

  <!-- Favicon -->
  <link rel="icon" href="/assets/favicon.png">

  <!-- Style -->
  <link  href='/assets/theme-white/style.css' rel='stylesheet'>
  <link href='/assets/style.css' rel='stylesheet'>

  <!-- Meta -->
  <meta content="Exosite APIs" property="og:title">
  <meta content="Documentation for Exosite's APIs" name="description">

  <!-- Status Page API Lib -->
  <script type="text/javascript" src="https://statuspage-production.s3.amazonaws.com/se.js"></script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-44116002-2', 'auto');
    ga('send', 'pageview');

  </script>

  <!-- Initializer -->
  <script></script>
</head>
<body role='flatdoc' class="no-literate">
  <div class='header'>
    <div class='left'>
      <a href="/">
        <img src="/assets/logo-2x.png" id="logo">
      </a>
    </div>
    <div class='links right'>
      <ul>
        <li><input id="docsearch" placeholder="Search..."></li>
        <li><a href='http://status.exosite.com' id="status-text"><div id="status-icon"></div>Status</a></li>
        <li><a href='https://support.exosite.com'>Support</a></li>
        <li><a href='https://github.com/exosite/api'>Contribute</a></li>
      </ul>
    </div>
  </div>

  <div class='content-root'>
    <div class='menubar'>
      <ul class='topmenu'>
        <li><a class="level-0" href="/">Overview</a></li>
        <ul style="padding-bottom:0.5em;"><p style="font-size:larger;">Tutorials</p>
          <li><a class="level-0" href="/tutorials/get-started">Getting Started</a></li>
        </ul>
        <ul style="padding-bottom:0.5em;"><p style="font-size:larger;">Device APIs</p>
          <li><a class="level-0" href="/coap">CoAP</a></li>
          <li><a class="level-0" href="/data">HTTP Data</a></li>
          <li><a class="level-0" href="/provision/device">Device Provisioning</a></li>
          <li><a class="level-0" href="/udp">UDP Single Shot</a></li>
        </ul>
        <ul style="padding-bottom:0.5em;"><p style="font-size:larger;">Application APIs</p>
          <li><a class="level-0" href="/rpc">Remote Procedure Call - RPC</a></li>
          <li><a class="level-0" href="/provision/management">Fleet Management</a></li>
          <li><a class="level-0" href="/scripting">One Platform Scripting</a></li>
          <li><a class="level-0" href="/widget">Portals Custom Widget</a></li>
          <li><a class="level-0" href="/portals">Portals API</a></li>
        </ul>
        <ul style="padding-bottom:0.5em;"><p style="font-size:larger;">Reference</p>
          <li><a class="level-0" href="https://support.exosite.com/hc/en-us/sections/200072527">One Platform</a></li>
          <li><a class="level-0" href="https://support.exosite.com/hc/en-us/sections/200072708">Portals Web Application</a></li>
          <li><a class="level-0" href="https://support.exosite.com/hc/en-us/sections/200054894">Portals Subdomain Admin</a></li>
        </ul>
        <ul style="padding-bottom:0.5em;"><p style="font-size:larger;">Other</p>
          <li><a class="level-0" href="/commander">Chat Interface - Commander</a></li>
          <li><a class="level-0" href="https://github.com/exosite/exoline/blob/master/README.md">Command Line Interface - Exoline</a></li>
          <li><a class="level-0" href="https://github.com/exosite-labs">Libraries</a></li>
        </ul>
      </ul>
      <div class='menu section' role='flatdoc-menu'></div>
    </div>
    <div role='flatdoc-content' class='content'><h1 id="device-provisioning-api">Device Provisioning API</h1>
<p>The following procedures are intended to be accessed from devices to get API keys and initialization content (e.g., firmware images) so that they can access the One Platform from other APIs.</p>
<p>For general information about accessing this API, see the <a href="README.md">main section</a>.</p>
<h2 id="endpoints">Endpoints</h2>
<p><a href="#provisionactivate">/provision/activate</a> - get a CIK for a device and activate it</p>
<p><a href="#provisiondownload">/provision/download</a> - list content, get content, get content information</p>
<h2 id="-provision-activate">/provision/activate</h2>
<h3 id="post-activate-client">POST - activate client</h3>
<p>Activates and returns <code>&lt;cik&gt;</code> of client administrated by Vendor <code>&lt;vendor&gt;</code>, of
model type <code>&lt;model&gt;</code> associated with Serial Number <code>&lt;sn&gt;</code>. Client must be 
enabled via <code>/provision/manage/model/&lt;model&gt;/&lt;sn&gt;</code>, the enabled state must not 
have expired, and the client must not have already been activated.</p>
<pre><code>POST /provision/activate HTTP/1.1
Host: m2.exosite.com
Content-Type: application/x-www-form-urlencoded; charset=utf-8
Content-Length: &lt;length&gt;

vendor=&lt;vendor&gt;&amp;model=&lt;model&gt;&amp;sn=&lt;sn&gt;
</code></pre><h4 id="response">response</h4>
<pre><code>HTTP/1.1 200 OK
Date: &lt;date&gt;
Server: &lt;server&gt;
Connection: Keep-Alive
Content-Length: &lt;length&gt;
Content-Type: text/plain; charset=utf-8

&lt;cik&gt;
</code></pre><p>Response may also be:</p>
<ul>
<li><code>HTTP/1.1 404 Not Found</code> if the client described by <code>&lt;vendor&gt;</code>, <code>&lt;model&gt;</code>, <code>&lt;sn&gt;</code> is not found on the system.</li>
<li><code>HTTP/1.1 409 Conflict</code> if the serial number is not enabled for activation.</li>
</ul>
<h4 id="example">example</h4>
<p>This command activates a device with serial number 12345678 and returns its CIK.</p>
<pre><code>$ curl http://m2.exosite.com/provision/activate \
    -H &quot;Content-Type: application/x-www-form-urlencoded; charset=utf-8&quot; \
    -d &quot;vendor=mysubdomain&amp;model=myclientmodel&amp;sn=12345678&quot;
</code></pre><h2 id="-provision-download">/provision/download</h2>
<h3 id="get-list-content-ids">GET - list content IDs</h3>
<p>List content <code>&lt;id&gt;</code>s. Caller with <code>&lt;DeviceCIK&gt;</code> must have an activated 
serial number in given <code>&lt;vendor&gt;</code> <code>&lt;model&gt;</code> name space.</p>
<pre><code>GET /provision/download?vendor=&lt;vendor&gt;&amp;model=&lt;model&gt; HTTP/1.1
Host: m2.exosite.com
X-Exosite-CIK: &lt;CIK&gt;
Content-Length: &lt;length&gt;
&lt;blank line&gt;
</code></pre><h4 id="response">response</h4>
<pre><code>HTTP/1.1 200 OK
Date: &lt;date&gt;
Server: &lt;server&gt;
Connection: Keep-Alive
Content-Length: &lt;length&gt;
Content-Type: text/csv; charset=utf-8

&lt;id 1&gt;
&lt;id 2...&gt;
&lt;id n&gt;
</code></pre><p>Response may also be:</p>
<ul>
<li><code>HTTP/1.1 403 Forbidden</code> if the <code>&lt;vendor&gt;</code> and <code>&lt;model&gt;</code> pair is invalid.</li>
</ul>
<h3 id="get-get-content">GET - get content</h3>
<p>If caller with <code>&lt;CIK&gt;</code> has an activated SN in given <code>&lt;vendor&gt;</code> <code>&lt;model&gt;</code> name 
space, and is authorized for the content, then the <code>&lt;id&gt;</code> content blob, or its 
requested range, is returned. The header <code>Range: bytes=&lt;range-specifier&gt;</code>, if
specified, allows the caller to request a chunk of bytes at a time. 
<code>&lt;range-specifier&gt;</code> takes the form of <code>X-Y</code> where both <code>X</code> and <code>Y</code> are 
optional but at least one of them must be present. <code>X</code> is the start byte 
position to return, <code>Y</code> is the end position. Both are 0 based. If <code>X</code> is 
omitted, <code>Y</code> will request the last <code>Y</code> count of bytes of the content. If <code>Y</code> 
is omitted, it will default to the end of the content. Note that <code>Content-Type</code>
of <code>&lt;blob&gt;</code> is based on the type set in the <code>POST</code> to 
<code>/provision/manage/content/&lt;model&gt;/&lt;id&gt;</code>.</p>
<pre><code>GET /provision/download?vendor=&lt;vendor&gt;&amp;model=&lt;model&gt;&amp;id=&lt;id&gt; HTTP/1.1
Host: m2.exosite.com
X-Exosite-CIK: &lt;CIK&gt;
{Range: bytes=&lt;range-specifier&gt;}
&lt;blank line&gt;
</code></pre><h4 id="response">response</h4>
<pre><code>HTTP/1.1 200 OK
Date: &lt;date&gt;
Server: &lt;server&gt;
Connection: Keep-Alive
{Accept-Ranges: bytes}
Content-Length: &lt;number of bytes being returned&gt;
{Content-Range: bytes &lt;first position&gt;-&lt;last position&gt;/&lt;total length&gt;}
Content-Type: &lt;content-type&gt;

&lt;blob&gt;
</code></pre><p>Response may also be:</p>
<ul>
<li><code>HTTP/1.1 206 Partial Content</code> if the response is partial.</li>
<li><code>HTTP/1.1 403 Forbidden</code> if the <code>&lt;vendor&gt;</code> and <code>&lt;model&gt;</code> pair is invalid.</li>
</ul>
<h3 id="get-get-content-info">GET - get content info</h3>
<p>If caller with <code>&lt;CIK&gt;</code> has an activated SN in given <code>&lt;vendor&gt;</code> <code>&lt;model&gt;</code> name
space, and is authorized for the content, then the <code>&lt;id&gt;</code> content information
is returned.</p>
<pre><code>GET /provision/download?vendor=&lt;vendor&gt;&amp;model=&lt;model&gt;&amp;id=&lt;id&gt;&amp;info=true HTTP/1.1
Host: m2.exosite.com
X-Exosite-CIK: &lt;CIK&gt;
Content-Length: &lt;length&gt;
&lt;blank line&gt;
</code></pre><h4 id="response">response</h4>
<pre><code>HTTP/1.1 200 OK
Date: &lt;date&gt;
Server: &lt;server&gt;
Connection: Keep-Alive
Content-Length: &lt;length&gt;
Content-Type: text/csv; charset=utf-8

&lt;content-type&gt;,&lt;byte-size&gt;,&lt;updated-timestamp&gt;,&lt;meta&gt;
</code></pre><p>Response may also be:</p>
<ul>
<li><code>HTTP/1.1 400 Bad Request</code> if the <code>&lt;vendor&gt;</code> and <code>&lt;model&gt;</code> pair is invalid.</li>
</ul>
</div>
  </div>

  <div id="markdown" style="display:none;">

  <div>

  <!-- Custom -->
  <script src='/assets/main.js'></script>

</body>
</html>
